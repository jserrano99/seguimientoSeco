<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.8.0.final using JasperReports Library version 6.8.0-2ed8dfabb690ff337a5797129f2cd92902b0c87b  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="planificacionEB" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="842" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="36d79102-3de1-4892-9814-ea1276871a7b">
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="EquipoLocal"/>
	<parameter name="fechaInicio" class="java.sql.Date">
		<parameterDescription><![CDATA[Fecha Inicio]]></parameterDescription>
	</parameter>
	<parameter name="fechaFin" class="java.sql.Date"/>
	<parameter name="mesesId" class="java.lang.Integer">
		<parameterDescription><![CDATA[Id Mes]]></parameterDescription>
	</parameter>
	<queryString language="SQL">
		<![CDATA[select 
t5.descripcion as anyosDs,
t5.id as anyosId,
t4.descripcion as semestreDs,
t4.id as semestreId,
t3.descripcion as trimestreDs,
t3.id as trimestreId,
t2.descripcion as mesesDs,
t2.id as mesesId,
t1.nmEncargo as numeroEncargo,
t1.encargoTitulo as tituloEncargo,
t1.estadoDs as estadoDs,
t1.objetoEncargoDs as objetoEncargoDs,
t1.fechaComienzoEjecucion as fechaComienzoEjecucion,
t1.fechaCompromiso as fechaCompromiso,
t1.nmHorasRealizadas as nmHorasRealizadas,
t1.asnmHorasComprometidas as nmHorasComprometidas,
t6.descripcion as aplicacionDs
from view_encargos_cf_en_ejecucion as t1 
inner join meses as t2 on ( t1.fechaComienzoEjecucion < t2.fecha_fin and t1.fechaCompromiso > t2.fecha_inicio)
inner join trimestre as t3 on t3.id = t2.trimestre_id
inner join semestre as t4 on t4.id = t3.semestre_id 
inner join anyos as t5 on t5.id = t4.anyo_id
inner join aplicacion as t6 on t6.id = t1.aplicacionId
where
t2.id = $P{mesesId} and (
( t1.fechaComienzoEjecucion < t2.fecha_inicio and t1.fechaCompromiso between  t2.fecha_inicio  and t2.fecha_fin ) or 
( t1.fechaComienzoEjecucion between  t2.fecha_inicio  and t2.fecha_fin  and t1.fechaCompromiso > t2.fecha_fin ) or
( t1.fechaComienzoEjecucion < t2.fecha_inicio and t1.fechaCompromiso > t2.fecha_fin ) or
( t1.fechaComienzoEjecucion > t2.fecha_inicio and t1.fechaCompromiso < t2.fecha_fin ) )]]>
	</queryString>
	<field name="anyosDs" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="anyosDs"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="anyos"/>
	</field>
	<field name="anyosId" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.label" value="anyosId"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="anyos"/>
	</field>
	<field name="semestreDs" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="semestreDs"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="semestre"/>
	</field>
	<field name="semestreId" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.label" value="semestreId"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="semestre"/>
	</field>
	<field name="trimestreDs" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="trimestreDs"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="trimestre"/>
	</field>
	<field name="trimestreId" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.label" value="trimestreId"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="trimestre"/>
	</field>
	<field name="mesesDs" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="mesesDs"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="meses"/>
	</field>
	<field name="mesesId" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.label" value="mesesId"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="meses"/>
	</field>
	<field name="numeroEncargo" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.label" value="numeroEncargo"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="view_encargos_cf_en_ejecucion"/>
	</field>
	<field name="tituloEncargo" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="tituloEncargo"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="view_encargos_cf_en_ejecucion"/>
	</field>
	<field name="estadoDs" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="estadoDs"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="view_encargos_cf_en_ejecucion"/>
	</field>
	<field name="objetoEncargoDs" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="objetoEncargoDs"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="view_encargos_cf_en_ejecucion"/>
	</field>
	<field name="fechaComienzoEjecucion" class="java.sql.Timestamp">
		<property name="com.jaspersoft.studio.field.label" value="fechaComienzoEjecucion"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="view_encargos_cf_en_ejecucion"/>
	</field>
	<field name="fechaCompromiso" class="java.sql.Timestamp">
		<property name="com.jaspersoft.studio.field.label" value="fechaCompromiso"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="view_encargos_cf_en_ejecucion"/>
	</field>
	<field name="nmHorasRealizadas" class="java.lang.Double">
		<property name="com.jaspersoft.studio.field.label" value="nmHorasRealizadas"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="view_encargos_cf_en_ejecucion"/>
	</field>
	<field name="nmHorasComprometidas" class="java.lang.Double">
		<property name="com.jaspersoft.studio.field.label" value="nmHorasComprometidas"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="view_encargos_cf_en_ejecucion"/>
	</field>
	<field name="aplicacionDs" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="aplicacionDs"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="aplicacion"/>
	</field>
	<sortField name="mesesId"/>
	<sortField name="aplicacionDs"/>
	<sortField name="fechaComienzoEjecucion"/>
	<variable name="meses" class="java.lang.Integer">
		<variableExpression><![CDATA[(MONTHS($F{fechaComienzoEjecucion},$F{fechaCompromiso}))+1]]></variableExpression>
	</variable>
	<variable name="parteProporcional" class="java.lang.Double">
		<variableExpression><![CDATA[$F{nmHorasComprometidas}/$V{meses}]]></variableExpression>
	</variable>
	<variable name="totalHoras" class="java.lang.Float" resetType="Master" calculation="Sum">
		<variableExpression><![CDATA[$V{parteProporcional}]]></variableExpression>
	</variable>
	<variable name="totalHoras_1" class="java.lang.Float" calculation="Sum">
		<variableExpression><![CDATA[$V{parteProporcional}]]></variableExpression>
	</variable>
	<variable name="horasAplicacion" class="java.lang.Float" resetType="Group" resetGroup="aplicacion" calculation="Sum">
		<variableExpression><![CDATA[$V{parteProporcional}]]></variableExpression>
	</variable>
	<group name="meses" isReprintHeaderOnEachPage="true">
		<groupExpression><![CDATA[$F{mesesId}]]></groupExpression>
		<groupHeader>
			<band height="30">
				<textField>
					<reportElement x="20" y="0" width="100" height="30" uuid="2f6265fc-7e57-47ea-930c-e6ae5be92e79"/>
					<textElement verticalAlignment="Middle">
						<font size="12" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{mesesDs}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="55">
				<textField pattern="#,##0.00" isBlankWhenNull="true">
					<reportElement x="664" y="0" width="47" height="30" uuid="1b293c1f-40ef-4681-9775-4edb2fc0550b"/>
					<box>
						<topPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$V{totalHoras}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="550" y="0" width="100" height="30" uuid="9047e8ce-5c60-4e9a-82e9-9eed3285a345"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="12" isBold="true"/>
					</textElement>
					<text><![CDATA[Total Horas  ]]></text>
				</staticText>
			</band>
		</groupFooter>
	</group>
	<group name="aplicacion" isReprintHeaderOnEachPage="true">
		<groupExpression><![CDATA[$F{aplicacionDs}]]></groupExpression>
		<groupHeader>
			<band height="50">
				<staticText>
					<reportElement x="59" y="21" width="447" height="25" uuid="8200a411-dd34-43f4-a995-79aadb74c0fb"/>
					<box>
						<bottomPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Título]]></text>
				</staticText>
				<staticText>
					<reportElement x="11" y="21" width="48" height="25" uuid="5df645d7-ddf3-4a21-92c3-3995608b6ac5"/>
					<box>
						<bottomPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Número]]></text>
				</staticText>
				<staticText>
					<reportElement x="565" y="16" width="65" height="30" uuid="145ce805-12c1-4dc7-b630-ae65499c531f"/>
					<box>
						<bottomPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Fecha Entrega]]></text>
				</staticText>
				<staticText>
					<reportElement x="630" y="10" width="40" height="36" uuid="431b27b6-033f-43f5-afee-7a528d70e957"/>
					<box>
						<bottomPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Horas Totales]]></text>
				</staticText>
				<staticText>
					<reportElement x="511" y="16" width="54" height="30" uuid="401cbce7-70ed-4c31-9bdb-eda2a3b72cee"/>
					<box>
						<bottomPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Fecha Inicio]]></text>
				</staticText>
				<staticText>
					<reportElement x="670" y="9" width="41" height="37" uuid="edd73373-4587-480d-8110-9df91e484750"/>
					<box>
						<bottomPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Horas Mes]]></text>
				</staticText>
				<textField>
					<reportElement x="130" y="0" width="510" height="21" uuid="0dec717e-1783-4f10-9a13-72f5991e1bd5"/>
					<textElement verticalAlignment="Middle">
						<font size="12" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{aplicacionDs}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="10" y="0" width="100" height="20" uuid="3c7dc0dc-dead-4153-a1b4-d3b674675e75"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="12" isBold="true"/>
					</textElement>
					<text><![CDATA[Aplicación: ]]></text>
				</staticText>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="37">
				<textField pattern="#,##0.00" isBlankWhenNull="true">
					<reportElement x="661" y="3" width="50" height="30" uuid="141da59e-c2e1-4e53-9486-0b777900d6c9"/>
					<box>
						<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{horasAplicacion}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="580" y="3" width="80" height="30" uuid="94d57bc9-ee98-4129-9ac4-f9040ab5912e"/>
					<box>
						<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="12" isBold="true"/>
					</textElement>
					<text><![CDATA[Total Horas  ]]></text>
				</staticText>
				<textField>
					<reportElement x="80" y="3" width="485" height="30" uuid="6ccfa7a0-f99b-49a1-b7a3-6b78ffeb6b6a"/>
					<box>
						<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{aplicacionDs}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="50">
			<image>
				<reportElement x="10" y="9" width="110" height="31" uuid="866fe7be-1d9f-4edb-b724-eb5b5657a3ed"/>
				<imageExpression><![CDATA["imagenes/textoMagma.jpg"]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="170" y="10" width="590" height="40" uuid="dd66ce10-c92d-4b7f-ae7d-7d7d1291adaf"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="16" isBold="true"/>
				</textElement>
				<text><![CDATA[PLANIFICACIÓN ENCARGOS INCLUIDOS EN CUOTA FIJA]]></text>
			</staticText>
		</band>
	</pageHeader>
	<detail>
		<band height="23" splitType="Stretch">
			<textField>
				<reportElement x="2" y="0" width="48" height="23" uuid="b60ee0d7-cfe7-42e0-afce-09b8598feeff"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{numeroEncargo}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="50" y="0" width="452" height="23" uuid="c8abeb5f-8c9d-45a3-b174-32ecae9c5d75"/>
				<textElement verticalAlignment="Middle">
					<font isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{tituloEncargo}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="661" y="0" width="41" height="23" uuid="a8455770-de64-4cb4-b5cc-91a45ffa1e28"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$V{parteProporcional}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy" isBlankWhenNull="true">
				<reportElement x="502" y="0" width="54" height="23" uuid="940345b4-4d9f-424c-ad57-a956162a8595"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{fechaComienzoEjecucion}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy" isBlankWhenNull="true">
				<reportElement x="556" y="0" width="65" height="23" uuid="815c3485-85f3-4a2e-8285-b8e0fed21234"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{fechaCompromiso}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="622" y="0" width="39" height="23" uuid="a8595f9e-5472-417c-8379-a90403c7e861"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{nmHorasComprometidas}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
